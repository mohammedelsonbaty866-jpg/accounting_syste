<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ø¨Ø±Ù†Ø§Ù…Ø¬ Ù…Ø­Ø§Ø³Ø¨ÙŠ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<!-- PDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
:root{
  --main:#2c3e50;
  --accent:#1abc9c;
  --bg:#f4f6f8;
  --card:#ffffff;
  --danger:#e74c3c;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Segoe UI,Arial;
  direction:rtl;
  background:var(--bg);
}
header{
  background:var(--main);
  color:#fff;
  padding:15px;
  text-align:center;
  font-size:18px;
}
nav{
  display:flex;
  background:#fff;
  border-bottom:1px solid #ddd;
}
nav button{
  flex:1;
  padding:12px;
  border:none;
  background:none;
  font-size:15px;
}
nav button:hover{background:#eee}
.container{padding:12px}
.card{
  background:var(--card);
  border-radius:8px;
  padding:12px;
  margin-bottom:12px;
  box-shadow:0 2px 6px rgba(0,0,0,.1);
}
input,select,button{
  width:100%;
  padding:12px;
  margin:6px 0;
  border-radius:6px;
  border:1px solid #ccc;
  font-size:15px;
}
button.primary{background:var(--accent);color:#fff;border:none}
button.danger{background:var(--danger);color:#fff;border:none}
table{width:100%;border-collapse:collapse}
th,td{padding:8px;border-bottom:1px solid #eee;text-align:center}
th{background:#fafafa}
.income{color:green;font-weight:bold}
.expense{color:red;font-weight:bold}
.report{padding:12px;text-align:center;border-radius:6px;margin-bottom:8px}
.hidden{display:none}
</style>
</head>

<body>

<header id="companyHeader">ğŸ“Š Ø¨Ø±Ù†Ø§Ù…Ø¬ Ù…Ø­Ø§Ø³Ø¨ÙŠ</header>

<nav>
  <button onclick="show('entries')"><i class="fa-solid fa-plus"></i> Ø§Ù„Ù‚ÙŠÙˆØ¯</button>
  <button onclick="show('report')"><i class="fa-solid fa-chart-line"></i> Ø§Ù„ØªÙ‚Ø±ÙŠØ±</button>
  <button onclick="show('settings')"><i class="fa-solid fa-gear"></i> Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
</nav>

<div class="container">

<!-- Ø§Ù„Ù‚ÙŠÙˆØ¯ -->
<div id="entries" class="card">
  <input id="name" placeholder="Ø§Ù„Ø¨ÙŠØ§Ù†">
  <input id="amount" type="number" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº">
  <select id="type">
    <option value="income">Ø¥ÙŠØ±Ø§Ø¯</option>
    <option value="expense">Ù…ØµØ±ÙˆÙ</option>
  </select>

  <button class="primary" onclick="add()">
    <i class="fa-solid fa-circle-plus"></i> Ø¥Ø¶Ø§ÙØ©
  </button>

  <button class="danger" onclick="clearAll()">
    <i class="fa-solid fa-trash"></i> Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„
  </button>

  <br><br>

  <table>
    <thead>
      <tr>
        <th>Ø§Ù„Ø¨ÙŠØ§Ù†</th>
        <th>Ø§Ù„Ù†ÙˆØ¹</th>
        <th>Ø§Ù„Ù…Ø¨Ù„Øº</th>
        <th></th>
      </tr>
    </thead>
    <tbody id="data"></tbody>
  </table>
</div>

<!-- Ø§Ù„ØªÙ‚Ø±ÙŠØ± -->
<div id="report" class="hidden">
  <div class="card report" id="totalIncome">ğŸ’° Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª: 0</div>
  <div class="card report" id="totalExpense">ğŸ’¸ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª: 0</div>
  <div class="card report" id="net">ğŸ“Š Ø§Ù„ØµØ§ÙÙŠ: 0</div>

  <button class="primary" onclick="downloadPDF()">
    <i class="fa-solid fa-file-pdf"></i> ØªØ­Ù…ÙŠÙ„ ØªÙ‚Ø±ÙŠØ± PDF
  </button>
</div>

<!-- Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª -->
<div id="settings" class="hidden card">
  <input id="companyName" placeholder="Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ©">
  <button class="primary" onclick="saveCompany()">
    <i class="fa-solid fa-save"></i> Ø­ÙØ¸
  </button>
</div>

</div>

<script>
let data = JSON.parse(localStorage.getItem("accounts")) || [];
let COMPANY = localStorage.getItem("company") || "Ø¨Ø±Ù†Ø§Ù…Ø¬ Ù…Ø­Ø§Ø³Ø¨ÙŠ";
companyHeader.innerText="ğŸ“Š "+COMPANY;

function show(id){
["entries","report","settings"].forEach(x=>{
document.getElementById(x).classList.add("hidden");
});
document.getElementById(id).classList.remove("hidden");
}

function render(){
let html="",inc=0,exp=0;
data.forEach((i,n)=>{
i.type==="income"?inc+=+i.amount:exp+=+i.amount;
html+=`
<tr>
<td>${i.name}</td>
<td class="${i.type}">${i.type==="income"?"Ø¥ÙŠØ±Ø§Ø¯":"Ù…ØµØ±ÙˆÙ"}</td>
<td>${i.amount}</td>
<td><button onclick="removeItem(${n})">âŒ</button></td>
</tr>`;
});
data.innerHTML=html;
document.getElementById("data").innerHTML=html;
totalIncome.innerText="ğŸ’° Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª: "+inc;
totalExpense.innerText="ğŸ’¸ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª: "+exp;
net.innerText="ğŸ“Š Ø§Ù„ØµØ§ÙÙŠ: "+(inc-exp);
}

function add(){
let n=name.value,a=amount.value,t=type.value;
if(n&&a){
data.push({name:n,amount:a,type:t});
localStorage.setItem("accounts",JSON.stringify(data));
name.value=amount.value="";
render();
}
}

function removeItem(i){
data.splice(i,1);
localStorage.setItem("accounts",JSON.stringify(data));
render();
}

function clearAll(){
if(confirm("Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ")){
data=[];
localStorage.removeItem("accounts");
render();
}
}

function saveCompany(){
let c=companyName.value;
if(c){
localStorage.setItem("company",c);
companyHeader.innerText="ğŸ“Š "+c;
}
}

function downloadPDF(){
const { jsPDF } = window.jspdf;
let doc=new jsPDF();
doc.text(`ØªÙ‚Ø±ÙŠØ± ${COMPANY}`,10,10);
doc.text(totalIncome.innerText,10,20);
doc.text(totalExpense.innerText,10,30);
doc.text(net.innerText,10,40);
doc.save("report.pdf");
}

render();
</script>

</body>
</html>
