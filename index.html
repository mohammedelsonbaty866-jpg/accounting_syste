<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <title>Ø¨Ø±Ù†Ø§Ù…Ø¬ Ù…Ø­Ø§Ø³Ø¨ÙŠ</title>
    <style>
        body {
            font-family: Arial;
            direction: rtl;
            background: #f0f0f0;
            margin: 0;
        }
        header {
            background: #222;
            color: #fff;
            padding: 15px;
            text-align: center;
        }
        nav button {
            padding: 10px;
            margin: 5px;
            width: 30%;
        }
        .container {
            padding: 10px;
        }
        input, select, button {
            padding: 10px;
            margin: 5px;
            width: 95%;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            background: #fff;
        }
        th, td {
            border: 1px solid #000;
            padding: 8px;
            text-align: center;
        }
        th {
            background: #ddd;
        }
        .income { color: green; }
        .expense { color: red; }
        .box {
            background: #fff;
            padding: 10px;
            margin: 5px 0;
            border: 1px solid #000;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>

<header>ğŸ“Š Ø¨Ø±Ù†Ø§Ù…Ø¬ Ù…Ø­Ø§Ø³Ø¨ÙŠ</header>

<nav class="container">
    <button onclick="show('entries')">Ø§Ù„Ù‚ÙŠÙˆØ¯</button>
    <button onclick="show('report')">Ø§Ù„ØªÙ‚Ø±ÙŠØ±</button>
    <button onclick="exportCSV()">ØªØµØ¯ÙŠØ±</button>
</nav>

<div class="container">

    <!-- Ø§Ù„Ù‚ÙŠÙˆØ¯ -->
    <div id="entries">
        <input id="name" placeholder="Ø§Ù„Ø¨ÙŠØ§Ù†">
        <input id="amount" type="number" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº">
        <select id="type">
            <option value="income">Ø¥ÙŠØ±Ø§Ø¯</option>
            <option value="expense">Ù…ØµØ±ÙˆÙ</option>
        </select>
        <button onclick="add()">Ø¥Ø¶Ø§ÙØ©</button>
        <button onclick="clearAll()">ğŸ—‘ Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„</button>

        <table>
            <thead>
                <tr>
                    <th>Ø§Ù„Ø¨ÙŠØ§Ù†</th>
                    <th>Ø§Ù„Ù†ÙˆØ¹</th>
                    <th>Ø§Ù„Ù…Ø¨Ù„Øº</th>
                    <th>Ø­Ø°Ù</th>
                </tr>
            </thead>
            <tbody id="data"></tbody>
        </table>
    </div>

    <!-- Ø§Ù„ØªÙ‚Ø±ÙŠØ± -->
    <div id="report" class="hidden">
        <div class="box income" id="totalIncome">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª: 0</div>
        <div class="box expense" id="totalExpense">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª: 0</div>
        <div class="box" id="net">Ø§Ù„ØµØ§ÙÙŠ: 0</div>
    </div>

</div>

<script>
let data = JSON.parse(localStorage.getItem("accounts")) || [];

function show(section) {
    document.getElementById("entries").classList.add("hidden");
    document.getElementById("report").classList.add("hidden");
    document.getElementById(section).classList.remove("hidden");
}

function render() {
    let table = "";
    let income = 0;
    let expense = 0;

    data.forEach((item, index) => {
        if (item.type === "income") income += Number(item.amount);
        else expense += Number(item.amount);

        table += `
        <tr>
            <td>${item.name}</td>
            <td class="${item.type}">
                ${item.type === "income" ? "Ø¥ÙŠØ±Ø§Ø¯" : "Ù…ØµØ±ÙˆÙ"}
            </td>
            <td>${item.amount}</td>
            <td><button onclick="removeItem(${index})">âŒ</button></td>
        </tr>`;
    });

    document.getElementById("data").innerHTML = table;
    document.getElementById("totalIncome").innerText = "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª: " + income;
    document.getElementById("totalExpense").innerText = "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª: " + expense;
    document.getElementById("net").innerText = "Ø§Ù„ØµØ§ÙÙŠ: " + (income - expense);
}

function add() {
    let name = document.getElementById("name").value;
    let amount = document.getElementById("amount").value;
    let type = document.getElementById("type").value;

    if (name && amount) {
        data.push({ name, amount, type });
        localStorage.setItem("accounts", JSON.stringify(data));
        document.getElementById("name").value = "";
        document.getElementById("amount").value = "";
        render();
    }
}

function removeItem(index) {
    data.splice(index, 1);
    localStorage.setItem("accounts", JSON.stringify(data));
    render();
}

function clearAll() {
    if (confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ")) {
        data = [];
        localStorage.removeItem("accounts");
        render();
    }
}

function exportCSV() {
    let csv = "Ø§Ù„Ø¨ÙŠØ§Ù†,Ø§Ù„Ù†ÙˆØ¹,Ø§Ù„Ù…Ø¨Ù„Øº\n";
    data.forEach(item => {
        csv += `${item.name},${item.type === "income" ? "Ø¥ÙŠØ±Ø§Ø¯" : "Ù…ØµØ±ÙˆÙ"},${item.amount}\n`;
    });

    let blob = new Blob([csv], { type: "text/csv;charset=utf-8;" });
    let link = document.createElement("a");
    link.href = URL.createObjectURL(blob);
    link.download = "accounting_data.csv";
    link.click();
}

render();
</script>

</body>
</html>
