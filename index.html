<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ø¨Ø±Ù†Ø§Ù…Ø¬ Ù…Ø­Ø§Ø³Ø¨ÙŠ</title>
<style>
body{font-family:Arial;direction:rtl;background:#f0f0f0;margin:0}
header{background:#222;color:#fff;padding:15px;text-align:center}
.container{padding:10px}
input,select,button{padding:10px;margin:5px;width:95%}
table{width:100%;border-collapse:collapse;background:#fff}
th,td{border:1px solid #000;padding:8px;text-align:center}
th{background:#ddd}
.income{color:green}
.expense{color:red}
.box{background:#fff;padding:10px;margin:5px 0;border:1px solid #000}
.hidden{display:none}
nav button{padding:10px;margin:5px;width:30%}
</style>
</head>
<body>

<!-- ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
<div id="login">
<header>ğŸ” ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</header>
<div class="container">
<input id="password" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
<button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
</div>
</div>

<!-- Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ -->
<div id="app" class="hidden">

<header id="companyHeader">ğŸ“Š Ø¨Ø±Ù†Ø§Ù…Ø¬ Ù…Ø­Ø§Ø³Ø¨ÙŠ</header>

<nav class="container">
<button onclick="show('entries')">Ø§Ù„Ù‚ÙŠÙˆØ¯</button>
<button onclick="show('report')">Ø§Ù„ØªÙ‚Ø±ÙŠØ±</button>
<button onclick="show('settings')">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
</nav>

<div class="container">

<!-- Ø§Ù„Ù‚ÙŠÙˆØ¯ -->
<div id="entries">
<input id="name" placeholder="Ø§Ù„Ø¨ÙŠØ§Ù†">
<input id="amount" type="number" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº">
<select id="type">
<option value="income">Ø¥ÙŠØ±Ø§Ø¯</option>
<option value="expense">Ù…ØµØ±ÙˆÙ</option>
</select>
<button onclick="add()">Ø¥Ø¶Ø§ÙØ©</button>
<button onclick="clearAll()">ğŸ—‘ Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„</button>

<table>
<thead>
<tr><th>Ø§Ù„Ø¨ÙŠØ§Ù†</th><th>Ø§Ù„Ù†ÙˆØ¹</th><th>Ø§Ù„Ù…Ø¨Ù„Øº</th><th>Ø­Ø°Ù</th></tr>
</thead>
<tbody id="data"></tbody>
</table>
</div>

<!-- Ø§Ù„ØªÙ‚Ø±ÙŠØ± -->
<div id="report" class="hidden">
<div class="box income" id="totalIncome">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª: 0</div>
<div class="box expense" id="totalExpense">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª: 0</div>
<div class="box" id="net">Ø§Ù„ØµØ§ÙÙŠ: 0</div>
</div>

<!-- Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª -->
<div id="settings" class="hidden">
<input id="companyName" placeholder="Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ©">
<button onclick="saveCompany()">ğŸ’¾ Ø­ÙØ¸ Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ©</button>
<hr>
<input id="newPass" type="password" placeholder="ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø¬Ø¯ÙŠØ¯Ø©">
<button onclick="changePassword()">ğŸ”‘ ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</button>
<hr>
<button onclick="logout()">ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
</div>

</div>
</div>

<script>
// ===== Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª =====
let PASSWORD = localStorage.getItem("password") || "1234";
let COMPANY = localStorage.getItem("company") || "Ø¨Ø±Ù†Ø§Ù…Ø¬ Ù…Ø­Ø§Ø³Ø¨ÙŠ";
document.getElementById("companyHeader").innerText = "ğŸ“Š " + COMPANY;

// ===== Ø¯Ø®ÙˆÙ„ =====
function login(){
if(document.getElementById("password").value === PASSWORD){
localStorage.setItem("logged","yes");
showApp();
}else alert("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©");
}

function showApp(){
document.getElementById("login").classList.add("hidden");
document.getElementById("app").classList.remove("hidden");
}

if(localStorage.getItem("logged")==="yes") showApp();

// ===== ØªÙ†Ù‚Ù„ =====
function show(id){
["entries","report","settings"].forEach(x=>{
document.getElementById(x).classList.add("hidden");
});
document.getElementById(id).classList.remove("hidden");
}

// ===== Ù…Ø­Ø§Ø³Ø¨Ø© =====
let data = JSON.parse(localStorage.getItem("accounts")) || [];

function render(){
let t="",inc=0,exp=0;
data.forEach((i,n)=>{
i.type==="income"?inc+=+i.amount:exp+=+i.amount;
t+=`<tr>
<td>${i.name}</td>
<td class="${i.type}">${i.type==="income"?"Ø¥ÙŠØ±Ø§Ø¯":"Ù…ØµØ±ÙˆÙ"}</td>
<td>${i.amount}</td>
<td><button onclick="removeItem(${n})">âŒ</button></td>
</tr>`;
});
data.length?null:null;
document.getElementById("data").innerHTML=t;
document.getElementById("totalIncome").innerText="Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª: "+inc;
document.getElementById("totalExpense").innerText="Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª: "+exp;
document.getElementById("net").innerText="Ø§Ù„ØµØ§ÙÙŠ: "+(inc-exp);
}

function add(){
let n=name.value,a=amount.value,t=type.value;
if(n&&a){
data.push({name:n,amount:a,type:t});
localStorage.setItem("accounts",JSON.stringify(data));
name.value=amount.value="";
render();
}
}

function removeItem(i){
data.splice(i,1);
localStorage.setItem("accounts",JSON.stringify(data));
render();
}

function clearAll(){
if(confirm("Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ")){
data=[];
localStorage.removeItem("accounts");
render();
}
}

// ===== Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª =====
function saveCompany(){
let c=companyName.value;
if(c){
localStorage.setItem("company",c);
companyHeader.innerText="ğŸ“Š "+c;
alert("ØªÙ… Ø§Ù„Ø­ÙØ¸");
}
}

function changePassword(){
let p=newPass.value;
if(p){
localStorage.setItem("password",p);
PASSWORD=p;
alert("ØªÙ… ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±");
newPass.value="";
}
}

function logout(){
localStorage.removeItem("logged");
location.reload();
}

render();
</script>

</body>
</html>
